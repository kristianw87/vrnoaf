worker_processes auto;

events { worker_connections 1024; }

http {

    include  /etc/nginx/mime.types;

    sendfile    on;
    tcp_nopush  on;

    server_names_hash_bucket_size   128; # this seems to be required for some vhosts

    server {
        listen      80;
        listen [::]:80;
        server_name www.vrnoaf.no vrnoaf.no admin.vrnoaf.no wp.vrnoaf.no;

        location / {
            rewrite ^ https://$host$request_uri? permanent;
        }

        #for certbot challenges (renewal process)
        location ~ /.well-known/acme-challenge {
            allow all;
            root /data/letsencrypt;
        }
    }
}
